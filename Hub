local Players = game:GetService("Players")
local player = Players.LocalPlayer or Players.PlayerAdded:Wait()

-- Hardcoded whitelist UserIds here
local WhitelistUserIds = {
    917787,  -- Replace with actual user ids
    87654321,
    11223344,
}

local function isWhitelisted(userId)
    for _, id in ipairs(WhitelistUserIds) do
        if id == userId then
            return true
        end
    end
    return false
end

if not isWhitelisted(player.UserId) then
    game.StarterGui:SetCore("SendNotification", {
        Title = "Access Denied",
        Text = "You are not whitelisted for this hub.",
        Duration = 5
    })
    return
end

-- Load Rayfield UI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "totally not cheating",
    LoadingTitle = "Loading Hub",
    LoadingSubtitle = "Welcome",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "TotallyNotCheatingConfig"
    },
})

local Tab = Window:CreateTab("Scripts", "file-code")

local function safeLoad(url)
    local success, err = pcall(function()
        loadstring(game:HttpGet(url))()
    end)
    if not success then
        warn("Failed to load script at "..url..": "..err)
    end
end

-- MM2 Script Button
Tab:CreateButton({
    Name = "MM2 Script",
    Callback = function()
        Rayfield:Destroy()
        safeLoad("https://raw.githubusercontent.com/Au0yX/Community/main/XhubMM2")
    end,
})

-- Rivals
Tab:CreateButton({
    Name = "Rivals",
    Callback = function()
        Rayfield:Destroy()
        safeLoad("https://raw.githubusercontent.com/VisioneducationOfLuaCoding/Ambrion/main/RivalsVersion3")
    end,
})

-- Bladeball
Tab:CreateButton({
    Name = "Bladeball",
    Callback = function()
        Rayfield:Destroy()
        safeLoad("https://raw.githubusercontent.com/VisioneducationOfLuaCoding/BladeBall/main/ScriptLoader")
    end,
})

-- Arsenal
Tab:CreateButton({
    Name = "Arsenal",
    Callback = function()
        Rayfield:Destroy()
        safeLoad("https://raw.githubusercontent.com/VisioneducationOfLuaCoding/Arsenal/main/Ambrion")
    end,
})

-- Steal a Brainrot
Tab:CreateButton({
    Name = "Steal a Brainrot",
    Callback = function()
        Rayfield:Destroy()
        safeLoad("https://raw.githubusercontent.com/VisioneducationOfLuaCoding/StealABrainrot/main/Ambrion")
    end,
})

Rayfield:LoadConfiguration()
Rayfield:SetVisibility(true)
